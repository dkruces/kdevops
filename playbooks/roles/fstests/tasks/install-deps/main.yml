---
- name: Ensure required /media/ directories are created
  become: true
  become_method: sudo
  ansible.builtin.file:
    state: directory
    path: "/media/{{ item }}"
  with_items:
    - scratch
    - "{{ sparsefiles_path }}"
    - test

- ansible.builtin.include_role:
    name: pkg

# tasks to install dependencies for oscheck
- name: oscheck distribution ospecific setup
  ansible.builtin.import_tasks: tasks/install-deps/debian/main.yml
  when: ansible_facts['os_family']|lower == 'debian'
- ansible.builtin.import_tasks: tasks/install-deps/suse/main.yml
  when: ansible_facts['os_family']|lower == 'suse'
- ansible.builtin.import_tasks: tasks/install-deps/redhat/main.yml
  when: ansible_facts['os_family']|lower == 'redhat'
