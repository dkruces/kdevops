---
- name: Import optional distribution specific variables
  include_vars: "{{ item }}"
  ignore_errors: yes
  with_first_found:
    - files:
      - "{{ ansible_facts['os_family']|lower }}.yml"
      skip: true
  tags: vars

- name: Distribution specific setup
  import_tasks: "{{ role_path }}/tasks/install-deps/debian/main.yml"
  when: ansible_facts['os_family']|lower == 'debian'
  tags: [ 'build-deps' ]

- import_tasks: "{{ role_path }}/tasks/install-deps/suse/main.yml"
  when: ansible_facts['os_family']|lower == 'suse'
  tags: [ 'build-deps' ]

- import_tasks: "{{ role_path }}/tasks/install-deps/redhat/main.yml"
  when:
    - ansible_facts['os_family']|lower == 'redhat'
    - ansible_facts['distribution']|lower != "fedora"
  tags: [ 'build-deps' ]

- import_tasks: "{{ role_path }}/tasks/install-deps/fedora/main.yml"
  when: ansible_facts['distribution']|lower == "fedora"
  tags: [ 'build-deps' ]
